/*
 *   DI_2108_P class, used for communicating with DATAQ Model DI-2108-P High
 *   Speed DAQ.
 *
 *   Uses libusb to communicate with device.
 *
 *   Developed by Sam de Jong
 */




#include <iostream>
#include <stdio.h>
#include <string.h>
#include <sstream>
#include <unistd.h>
#include <vector>
#include </usr/include/libusb-1.0/libusb.h>

#ifndef DI_2108_P_h
#define DI_2108_P_h 1


//#include "DI-2108-P.cpp"

using namespace std;

class DI_2108_P{
  
 public:
  
  DI_2108_P();                   //empty constructor
  DI_2108_P(int nChannels);      //constructor with number of channels
  void Initialize();             
  void close();
  string sendMessage(string message);
  void startScan();
  void stopScan();
  void reset();
  vector<double> getReadings();

  //status booleans
  bool isRunning() { return isRun;}
  bool isRec(){ return isRecording;}
  bool isInitialized() {return isInit;}

  
  void setNChannels(int nChannels);
  void setRange(int channel, int range);


 private:

  static const int vID = 0x0683;
  static const int pID = 0x2109;
  libusb_context *ctx;
  libusb_device_handle *dev_handle;
  
  bool isRun;
  bool isRecording;
  bool isInit;

  vector<int> ranges;
  vector<double> multiplier;
  vector<double> divisor;
  int nChan;

};

#endif
